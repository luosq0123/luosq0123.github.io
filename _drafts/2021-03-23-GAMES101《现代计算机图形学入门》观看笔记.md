---
title: GAMES101《现代计算机图形学入门》观看笔记
description: 时间轴记录
#date: 2020-01-01
#updated: 2020-01-01
categories:
- 图形学
tags:
- 图形学
---



# Lecture 01 Overview of Computer Graphics

01:22 什么是图形学，合成和操作视觉信息
01:34 只狼画面好，怎么判断，从技术上画面足够亮，全局光照
03:08 无主之地3，卡通
03:55 黑客帝国，特效是图形学应用
06:00 阿凡达，面部动作捕捉
07:00 动画疯狂动物城，毛发。几何，渲染
08:27 冰雪奇缘2, 烟雾，粒子。模拟
09:37 设计。CAD，车，光照。碰撞检测模拟
12:26 宜家网站。渲染
13:45 可视化 
15:15 虚拟现实，增强(augmented)现实，混合现实
18:06 电子绘画
19:53 模拟。尘埃，黑洞
21:56 Graphical User Interfaces
22:43 Typography 字体
24:32 为什么学图形学。基本智力挑战：创建逼真的虚拟世界与之互动; 需要了解真实的物理世界; 新的计算方法，显式，技术
25:58 技术挑战：数学，光学，3D形体，动画，模拟
26:43 学图形学的理由awesome
27:50 主要4部分，光栅化，几何（曲线曲面），光线追踪，动画与模拟
29:10 光栅化：把几何图元投影到屏幕。30fps表示实时，不到就算离线。
30:07 几何，曲线曲面
30:34 光线追踪，动画和电影，真实。trade off，实时光线追踪
31:46 动画模拟。球弹，仿真布垂下来。
32:31 这门课不讲Opengl / DirectX / Vulcan，不讲Shaders，不讲三维建模，不讲计算机视觉（一切需要猜测的内容就是计算机视觉在做的事情），不讲深度学习
37:02 图形学和计算机视觉的区别
42:33 课程细节，网站，参考资料，答疑平台
46:23 作业，提交。大作业
52:11 用IDE
57:20 学术诚信

# Lecture 02 Review of Linear Algebra

02:30 复习上节课内容
03:20 线性代数
03:39 图形学依赖于数学，物理，信号处理，数字分析，美学
05:50 这节课讲的线性代数，向量，矩阵
06:41 蜗牛动画旋转例子
07:41 向量，向量长度，单位向量，向量求和
13:25 迪卡尔坐标系
16:20 向量的乘法，点乘可以得到夹角， 交换率分配率结合率。点乘的另一个作用，一个向量投影到另一个向量上，可以把一个向量分解为两个垂直的向量。计算两个向量方向有多接近。
30:20 向量的叉积，交换率不存在，要变成负的。叉乘变成矩阵。在图形学中的作用，判断左右，判断内外（和顺时针或逆时针的边叉乘方向一样）做三角形光栅化的基础
43:05 向量叉乘定义坐标系，分解任意一个向量
44:53 矩阵，基本操作。乘法没交换率。转置，逆
53:42 向量的点乘和叉乘写成矩阵。叉乘的dual matrix
55:28 例子，Sponza场景，相机运动
58:38 作业0, 配环境。

# Lecture 03 Transformation

01:00 复习上节课，这节课的内容
02:48 模型变换（modeling），视图变换（viewing）
03:10 模型变换的例子，相机运动，机器人，机器人逆运动学，pixar
05:15 投影
06:45 缩放变换
10:20 反射(reflection)矩阵
11:40 剪切(shear)矩阵
16:10 旋转矩阵，推导
23:58 线性变换
25:58 齐次坐标，平移
32:58 点后面加1, 向量后面加0
40:00 仿射变换
44:00 逆变换
45:26 变换的组合。旋转默认是以原点为中心逆时针旋转。
48:21 不满足交换率，顺序
52:03 矩阵结合率
51:00 变换的分解，想绕点c旋转，先移-c，旋转，再移回去
57:55 三维变换，类比

# Lecture 04 Transformation Cont.

01:20 旋转负角度，转置，正交矩阵
05:25 今天要讲的内容，3维变换。观测变换分为视图（view/camera）变换和投影变换。3维的齐次坐标，4 × 4的矩阵
08:34 三维的缩放，平移，旋转（y是反的，因为是z×x）。
12:49 复杂旋转，欧拉角。俯仰，偏航，翻转。
15:30 Rodrigues公式，绕过原点的某个轴旋转。如果不过原点，就先移到原点，旋转完再移回原点。四元数考虑到插值，这门课不提
21:23 视图变换，以拍照举例，把要拍的东西安排一个好地方（模型变换），找一个好角度放相机（视图变换），拍照（投影变换）
25:12 相机放在哪怎样定义：位置，朝向，相机上方的
26:53 如何进行视图变换？约定**相机放在原点，向上是Y，看向-Z**
29:28 把任意一个相机放到这个位置
30:28 写成矩阵形式，先平移，再旋转。怎样把相机位姿变换到原点，可以先求怎样从原点变换到现在的相机位姿，然后逆变换，因为是正交变换所以转置就行
38:41 投影，正交投影，透视投影，透视投影近大远小
43:00 正交投影，相机放在标准位置，把Z扔掉，全移到[-1, 1]，得到的就是正交投影
45:27 平行投影的操作，定义一个立方体。长方体映射到标准立方体，l,r,b,t,f,n, 变换矩阵
53:00 透视投影，齐次坐标×z，
61:49 相似三角形，推导透视投影


# Lecture 05 Rasterization 1(Triangles)

04:20 复习上节课，观测变换
06:02 下一步，光栅化
06:39 上一次透视投影转化成正交投影
09:05 相机的垂直可视角度（Field of View，fovY），长宽比，推出水平可视角度
11:05 垂直可视角度与t， n 宽高比的关系
14:10 MVP（模型、视图、投影）变换之后，画在屏幕上
14:49 屏幕是二维数组，Raster是德语的屏幕，把东西画在屏幕上就是光栅化。picture element就是pixel
17:59 屏幕的空间定义，作者定义左下角是（0，0），往右x，往上y
22:03 [-1, 1]^2^映射到[0, width]×[0, height], 视口变换
24:50 例子，少年pi老虎的多边形
25:36 现实中的绘制工具
26:26 光栅显示设备，示波器，用示波器画蘑菇
28:12 阴极射线管（CRT）显示器，隔行扫描（这一帧画奇数行，下一帧画偶数行）
32:35 现代显示设备，显存中的一块区域映射到屏幕上
34:00 平板显示设备，LCD，计算器显示器，手机显示器，视网膜屏，OLED
35:03 LCD就是液晶显示器，液晶通过自己的不同排布影响光的偏振方向，两个互相垂直的光栅，经过液晶的扭曲让光通过
37:08 LED就是发光二极管
37:55 电子墨水屏，kindle，墨水翻转，刷新率低
39:10 回到原来的话题
39:25 多边形变换到屏幕上，三角形
40:15 三角形的性质。最基础，多边形能拆成三角形；三角形一定是平面的，一定是凸的，定义三个顶点的属性，内部可以渐变（插值）
42:24 判断一个像素和三角形的关系
43:53 采样的方法，1维到3维
46:00 判断像素的中心是否在三角形内，inside(tri, x, y)函数，inside(tri, x + 0.5, y + 0.5)
48:47 回顾。函数的细节，向量的叉积判断是否在三角形内
52:51点碰巧在边界上，这门课不处理。可以自己定义，OpenGL, DX，认为落在上边和左边在三角形内，右边和下边不在。
54:18 把所有像素走一遍没必要，包围盒（最小x-最大x，最小y-最大y）
56:38 每一行找最左和最右，适用于光栅化旋转过的窄长三角形
58:12 实际的屏幕的光栅化，iPhone；三星拜耳阵列，绿色密度更高，因为人眼对绿色更敏感
61:09 彩色打印机，省墨的排列
62:03 这门课认为屏幕上每个像素是内部颜色均匀的方块
62:23 问题：像素是均匀的，锯齿，采样率不够会走样，下次讲反走样，抗锯齿。预告下节课比较难

# Lecture 06 Rasterization2 (Antialiasing and Z-Buffering)

01:20 今天的内容要难很多
02:30 上节课，光栅化关键的地方，像素中心，采样
03:23 这节课讲反走样，讲遮挡和可见性的问题，反走样
03:55 三角形，去锯齿的概念。锯齿的学名是走样
05:45 从理论开始说。照片的采样，视频的采样（不同的时间）
08:25 采样瑕疵（artifacts）
09:10 采样产生的artifacts例子，锯齿，摩尔纹，旋转（电风扇，车轮）（人眼的时间采样）
11:38 造成走样的本质，信号的变化太快，采样的速度跟不上
13:14 采样之前做模糊（滤波）
14:55 实际效果，对比
15:55 先采样再模糊，效果不行
16:49 为什么？
17:16 频域是啥？正弦和余弦。f = 1/T。
19:45 傅里叶级数展开
22:34  傅里叶变换，f(x) -> F(w)
24:43 从例子来看傅里叶变换，频率从低到高。采样间隔太大的后果
29:21 滤波的概念，把某个特定的频率段删掉
30:00 傅里叶变换，时域变到频域。图像的例子，中心定义成低频，周围定义成高频，通过亮度来表示有多少信息。自然图像低频在中间很少，高频在外面。为什么会有十字，因为要把不周期性重复的信号重复，图像的最上面最下面，最左边最右边会有剧烈的变化
33:27 把低频的抹掉再变回去，高通滤波（只剩下高频），只能看到一些边缘
36:10 只留下低频，边界看不到了。水波纹是啥
37:46 去掉高频和低频，就会提取到不太明显的边界
39:45 从另外一个角度，滤波 = 卷积（=平均）
40:38 卷积操作
43:18 卷积定理，时域卷积等于频域相乘
44:29 卷积定理例子，模糊
47:45 滤波器，1/9 3×3的卷积核
49:10 分析，越大的滤波核 = 越低的频率
51:27 采样：重复频率上的内容
51:54 采样一个时域上的函数，乘以冲击函数。采样就是在重复原始信号的频谱
55:11 为什么会产生走样信号，采样越稀疏，对应的频谱复制粘贴越密集，发生了混叠。
57:39 反走样做法。增加采样率；真正的反走样，先做模糊再采样
61:02 三角形应该怎样变模糊，用低通滤波器卷积
61:59 实用的方法，1个像素的小方块
63:08 像素内部，对像素覆盖的求平均
64:20 实际中，怎样算？近似方法，MSAA（Multisample anti-aliasing ），1个像素里面N×N
70:00 4×4MSAA效果
70:10 MSAA有更好性能的分布
73:25 抗锯齿方案。FXAA（Fast Approximate AA）和增加样本数没关系，是图像的后期处理，把边界通过图像匹配的方法找到，换成没有锯齿的。TAA（Temporal AA）找上一帧，复用上一帧的感知。
77:00 超分辨率，DLSS用深度学习的方法猜出来

# Lecture 07 Shading 1 (Illumination, Shading and Graphics Pipeline)

02:22 上节课，光栅化怎么做，采样，走样，反走样。把一个三角形画在了屏幕上
03:43 多个不同位置，三个遮挡的三角形，解决方法：深度缓冲（Z-Buffer）。
04:45 可见性问题。从远到近画，新画的东西会覆盖以前画的东西，（油）画家算法。画一个立方体，上面和左边要注意顺序
09:09 对三角形排序（n log n）再画，存在更复杂的情况，三个三角形两两遮挡
10:36 深度缓冲，除了渲染的到的结果，还要维护深度图。之前是相机在原点往-z看，这次简化，深度当成正值
13:48 深度缓冲的立方体例子，深度图越近颜色值越小（越黑）。对单个像素，看新画的要不要更新。
16:51 深度缓冲算法。先将深度图初始化为无穷，对每个三角形，对每个像素，让深度和之前的比，决定要不要更新渲染图和深度图
18:40 深度缓冲的例子
23:45 假设三角形是常数个像素，n个三角形，时间复杂度O(n)。因为并没有排序，只是记录当前的最小值。假设没有相同的深度，和画三角形的顺序没有关系，浮点值的比较。
30:34 深度缓冲处理不了透明物体
30:46 着色（Shading）。复习下现在学了什么。
32:20 一系列立方体的旋转，逆时针旋转？顺时针旋转？每个面颜色不一样
33:46 巧克力奶茶的渲染
35:16 着色的定义，传统绘画的定义引入明暗和颜色，图形学定义，对不同的物体应用不同的材质
37:27 基础的着色模型，Blinn-Phong 反射模型
38:06 茶杯的例子，镜面高光（specular），漫反射（diffuse），环境照明（ambient）（间接光照）。假设任何一个点会接收到环境光
42:22 假设局部是平面，定义三个单位向量，法线n，观测方向v（点往眼），光照方向l（点往光源）。定义颜色，shininess，...
45:24 着色的局部性，只看点自己，不考虑其他的存在。阴影以后再说
47:18 漫反射，朝向和光有不同夹角时明暗不一样，单位面积接受到的能量不一样，举例地球的四季之分。Lambert's 余弦定律
53:07 光线衰减，在任一时刻点光源的能量集中在一个球壳上，能量守恒，定义光的强度在单位半径为I，半径为r光的强度就是I/r^2^。
57:32 L~d~ = k~d~(I/r^2^)max(0, n·l)。k~d~是漫反射的系数。说明不管从哪个方向看能量是一样的，也就是说和v（观测方向）没关系
62:21 石膏球的例子
65:38 Blinn-Phong模型是经验的模型，并不是完全符合物理的模型。

# Lecture 08 Shading 2 (Shading, Pipeline and Texture Mapping)

02:48 复习上节课，3种反射项。
04:34 漫反射项，上节课的推导。
06:04 高光项加进去。光滑，接近镜面反射。人眼观察的方向和镜面反射的方向接近的时候可以看到高光
07:17 Blinn-Phong模型观察到的现象，判断半程向量h（角平分线）和法线n是否接近，点乘接近1说明离得进，接近0说明离得远。L~s~=k~s~(I/r^2^)max(0, n·h)^p^，这里的n.h就是cosα。k~s~是镜面反射系数。Phong模型是先算反射方向（比较难算），再和观察方向的夹角，所以Blinn改进了。
12:05 为什么有一个指数p，p一般取100-200，因为cos下降太慢了， 
13:48 石膏球的例子，说明k~s~和p的大小对高光的影响
14:40 环境光照项，L~a~=k~a~I~a~， 做一个假设，任何一个点接收到的环境光是相同的，I~a~是强度，k~a~是环境光的系数。环境光和入射方向，观察方向，法线都没关系，其实是一个常数，目的是保证没有地方是黑的，提升整体的亮度。这里的环境光只是大胆的简化，实际情况不是这样的。
16:55 案例，三种光加起来得到的结果，Blinn-Phong模型
18:25 问答，离得远会暗？以后会解释
20:35 着色频率，三个球，几何表示一样，为什么着色了之后不一样。第一幅图，一个平面做一次。第二幅图，一个面的每个顶点的法线不同，每个顶点着色，内部的点插值。第三幅图，每个像素都着色。
23:18 三种着色频率。第一种，三角形两边做叉积求法线，着色，叫flat shading
24:02 第二种，顶点求法线，中间插值，叫gouraud shading
25:06 第三种，每个像素着色，叫Phong shading
26:47 三种频率石膏球对比，多边形越多，就不用逐像素
29:05 顶点的法线。如果是球就很简单。顶点关联的面的法线求平均（简单平均，加权贫困）
31:07 如何定义逐像素的法线，要用到重心坐标。
32:00 问答。
32:47 图形管线（古老的说法），现在叫实时渲染管线
33:39 图形管线。从场景到最后的一张图，经过的过程，在显卡里写好了。3d顶点 -> 屏幕顶点 -> 屏幕三角 -> 光栅化得到fragment -> 着色得到图
37:21 例子，MVP变换（对每个顶点），光栅化（对每个像素采样判断是否在三角形内），深度缓冲（像素），着色（顶点 + 像素）。现代GPU可编程，让你决定顶点像素如何着色
39:40 纹理映射马上讲
40:25 自己编程解决顶点和像素如何着色，自己写Shader，每个顶点/像素都会这么执行。vetex shader顶点着色器，pixel/fragment shader像素/片段着色器。GLSL的像素着色器的程序，全局变量纹理，光照方向，顶点法线，clamp函数限制到0~1。
46:53 推荐网站，Shadertoy
47:39 蜗牛的例子。
49:15 现代的显卡
51:07 GPU，图形 管线的硬件实现，着色器是可编程的，还有几何着色器，compute着色器。GPU可以理解成高度并行化的处理器
54:50 纹理映射。一张图，两个台灯照向一个球的例子。
56:45 三维物体表面是二维的，纹理就是一张图，
58:34 独眼巨人的例子，怎么贴图， 怎么把空间中三角形映射到纹理上（先不管，假装已经规定好了空间上的点对应的纹理坐标）。
61:08 纹理上定义坐标系uv，uv的范围都认为在0~1之间。
62:53 实际上的独眼巨人。
63:10 纹理用在不同的物体表面。
64:20 纹理无缝
65:30 如果知道三角形顶点坐标，如何得到内部的坐标？重心坐标

# Lecture 09 Shading 3 (Texture Mapping Cont.)

01:30 复习上节课
04:09 今天要讲的内容。重心坐标，纹理怎么贴，纹理其他应用
04:49 重心坐标为了三角形内部插值，坐标，颜色，法向量。
07:31 重心坐标的意思，（α, β, γ）,(x, y) = αA + βB + γC，α + β + γ = 1，且都满足非负
10:50 A点的重心坐标
11:31 α + β + γ = 1是为了保证在平面上，重心坐标的另外一个定义，面积比
14:35 根据这种定义，很容易得到重心的重心坐标。
15:21 算任意点重心坐标，不用算面积的方法
16:21 任何一个点的颜色插值，颜色也是用重心坐标插值的。重心坐标不能保证投影后不变，所以空间中的三角形应该在投影前用三维坐标做插值。
20:47 把纹理应用到实际的渲染中
21:03 屏幕上的采样点(x, y)，知道对应的(u, v)在哪，直接用颜色就行了。
22:40 问题，纹理放大，如果纹理太小了怎么办。眼睛的例子，texel是纹理元素。
25:47 双线性（Bilinear）插值。
31:47 中间双线性插值的结果。没有右边双三次插值（Bicubic）的效果好，双线性用4个点，双三次用16个点
34:24 如果纹理太大了会怎么样？
34:55 例子，远处摩尔纹，近处纹理。超采样开销很大。
39:00 走样问题，纹理过大，一个像素内对应太多texel，超采样开销太大。如何避免采样，直接知道平均值？
41:40 解决任何一个区域，如何知道它的平均值，点查询和范围查询。
42:40 引入Mipmap，允许做范围查询，快，不准，方形，
44:17 Mipmap例子，就是缩分辨率，提前生成多层。
46:17 对应计算机视觉界叫图像金字塔。额外存储量1/3（级数求和）
50:09 查询的区域有多大，区域怎样得到？将pixel和它的邻居映射到纹理上，取两个纹理空间上距离的较大值，近似成正方形。在D=log~2~L层会变成一个像素，在这层查询
55:54 发现渲染结果不连续，怎样查小数层
57:37 在两层都双线性插值，然后在两层中双线性插值，也就是三线性插值。三线性插值现在广泛使用
60:19 三线性插值渲染结果，是连续的
60:54 Mipmap到了远处的地方糊掉了，Overblur。
62:24 部分解决三线性插值，各项异性过滤
62:55 Mipmap的问题是只有正方形，其实还有不均匀的压缩
64:33 屏幕映射到纹理会有长条形，各项异性过滤可以解决正的矩形，无法解决斜的
66:00 EWA过滤，不规则的形状拆分，再多次查询。各项异性过滤多少x就是压缩x-1次，额外存储量3倍。

# Lecture 10 Geometry 1 (Introduction)

03:48 复习前面，着色，纹理映射，插值，重心坐标，纹理太小放大，纹理太大，范围查询，Mipmap，
05:26 前几次课，球的例子，三种着色频率，贴图，今天讲反射
06:50 纹理的其它作用。现代计算机GPU里，纹理 = 内存 + 范围查询（滤波）
07:44 环境贴图，犹他茶壶的例子，用纹理描述环境光。其它经典模型，斯坦福兔子和龙，康奈尔盒子。假设环境光来自无限远处，只记录方向信息
12:00 另外一个例子，镜子球。
12:53 把环境光记录在球面上，并且把它展开。
13:20 展开后的扭曲问题，顶上和底下会扭曲，因为不是均匀描述。
14:25 存在立方体的表面，6张图。它的问题，方向需要额外计算
17:15 纹理还可以用来凹凸(bump)贴图，纹理用来描述相对高度。假的凹凸。
20:53 不改变几何信息，通过纹理的高度改变法线
22:35 怎样计算法线，计算导数。一维的情况，用差分方法求导数dp = c * [h(p+1) - h(p)], 常数用来定义凹凸贴图的影响大不大。切线的方向就是(1, dp)。法线的向量就是(-dp, 1), 归一化成单位向量
25:44 二维的贴图，怎样影响法线。dp/du, dp/dv, 法线方向n = (-dp/du, -dp/dv, 1).normalized()。定义局部的坐标系，法线方向(0, 0, 1)，再计算回去。
29:07 更现代化的做法，位移(displacement)贴图。法线贴图没改变几何，边缘没改就露馅了，法线贴图凹凸没有阴影。DirectX提供动态细分。
33:35 三维纹理，定义了空间中任何一个点的值，其实是一个噪声函数。柏林噪声
35:26 纹理还可以记录已经算好了的阴影。环境光遮蔽。着色的结果乘以计算好的环境光遮蔽贴图
37:15 三维纹理在医学CT核磁共振中的应用
38:15 开始将几何的部分，先说几何的例子
38:40 玻璃和杯子，车，齿轮，布料，水滴，城市，超能陆战队，狗毛，细胞，树
45:54 对几何归类。隐式和显式的几何，先举例子。
46:31 几何的隐式表示：满足一些条件的点。f(x, y, z) = 0
48:53 隐式的缺点，很难看出来结构。优点，很好判断点在不在面上/内/外
50:56 显式表达：直接给出（比如三角形面）或者通过参数映射给出
52:29 参数映射的例子
54:06 显式的缺点，很难判断点在不在面上/内/外
55:16 几何没有最好的表示。
56:11 隐式地表示方法还有很多种。数学公式，奶牛
58:23 CSG(Constructive Solid Geometry)，简单几何通过布尔运算来表示复杂几何。例子：镂空骰子的形状
60:56 距离函数，两个水滴融合。空间上的点到物体的最小距离（可以是负的）
63:07 应用距离函数的例子，混合运动的边界
67:52 融合两个物体
68:34 例子，之前的蜗牛，这里是瓢虫蘑菇。
69:18 恢复成表面，找到f(x) = 0。水平集方法，地理上的等高线。
71:22 三维的水平集例子CT/MRI。水平集描述水花。
72:33 分形
74:56 总结一下。隐式表示的优点，还有光线求交方便。缺点。

# Lecture 11 Geometry 2 (Curves and Surfaces)

02:20 上节课讲了几何，隐式几何
03:06 显式几何的表示方法
03:30 点云，就是(x, y, z)的列表，特点
05:38 多边形面，图形学中最广泛使用
06:48 .obj格式文件表示模型。v顶点，vn法线，vt纹理坐标，f连接关系（一行三个v/vp/vn表示三角形）
10:36 曲(qū)线，相机沿着曲线运动，动画的例子，maya。字体的控制点
13:00 贝塞尔曲线，控制点定义曲线，切线方向是连线方向
14:44 怎样画贝塞尔曲线，De Casteljau算法。3个控制点，二次贝塞尔曲线，讲解画法，递归的方式。
19:22 四个控制点的例子，动画表示。
22:02 贝塞尔曲线代数方法，推导
26:23 总结，n阶的贝塞尔曲线，Bernstein多项式（描述二项分布的多项式）作为系数对给定控制点的加权，参数t
29:30 Bernstein多项式
31:00 贝塞尔曲线的性质。过起点和终点；起点和终点朝向是切线；仿射变换下还是贝塞尔曲线（也就是说可以只记录控制点再重新画，但投影变换不行）；凸包性质
34:08 什么是凸包，能够包围一系列点的最小凸多边形。贝塞尔曲线一定在凸包之内
37:00 分段的贝塞尔曲线，通常一段用4个控制点（3次贝塞尔曲线）。PhotoShop钢笔工具拉曲线。
40:50 网页演示，拖拽。怎样才能保证光滑，两段相交的控制点上的切线重合，也就是导数连续
44:00 C0连续，接触就行。C1连续，共线，方向相反。C2连续，二阶导数连续。
46:39 其它的图形学是代数到几何，这门课是几何到代数
47:35 样条(splines)曲线
48:42 B样条，指基函数样条，对贝塞尔曲线的扩展。贝塞尔曲线动一个点整体会变，希望能有局部性，非均匀有理B样条（NURBS），两个贝塞尔合并，拆分，控制点减少等等，这门课不详细讲，想多学可以看av66548502
53:07 曲面，怎么得到，大象和茶壶，贝塞尔曲面
54:18 4×4个控制点，得到贝塞尔曲面的过程
56:39 怎样拼接就不说了。详细过程，通过两个参数u, v映射。曲线是一个参数t
59:08 三角形网格的操作，几何处理。网格细分（增加三角形数量）；网格简化（用更少的网格描述）；网格正规化（让三角形接近正三角形）。作业画贝塞尔曲线

# Lecture 12 Geometry 3

02:45 图形学得图灵奖，Ed Catmull 和 Pat Hanrahan
04:44 介绍UCSB的老师
06:40 接着上节课讲，网格细分，简化，正规化
09:22 细分，位移贴图提过。细分除了引入更多三角形，还要让物体变得更光滑
11:00 Loop细分（Loop是发明者的名字，不是循环），只能处理三角形，两步细分。第一步，数量增多，一个分成4个，区分成新的顶点和老的顶点，需要分别调整让他们变光滑
13:24 如何分别调整让他们变光滑，更新新点的方法，周围旧点直接和间接加权。
15:53 旧点的更新，一部分保留自己，一部分受其他影响。(1 - n * u) * original_position + u * neighbor_position_sum。n是度，u=1/16 if n==3, 1/(8n) otherwise
19:45 人头例子，拆分的结果
20:35 Catmull-Clark细分，不止可以处理三角。定义两个概念，非四边形面，奇异点(度不是4的点)。
23:10 边上的中点和面的中点连起来。一次细分后，非四边形内多了奇异点，非四边形消失。
27:39 再次细分，奇异点数量不会变了
28:15 怎样更新，更新的公式，不要求掌握
30:08 Loop细分和Catmull-Clark细分的对比。
31:30 皮克斯的动画，最早应用细分的短篇
33:32 曲面简化，减少三角形数量，不同的情况下用不同的几何模型。几何的层次不好做
38:25 怎样做简化。一种方法：边坍缩(edge collapsing)
39:07 哪些边重要，哪些边不重要，二次误差度量。
42:00 坍缩哪一条边？每一条边都坍缩
43:23 如何选不同的边，从二次误差度量最小的开始，坍缩会影响相邻的。优先队列，更新受影响的边。贪心算法是否能保证全局最优？
46:59 奶牛模型坍缩
48:13 大佬当年的作业
49:10 光栅化怎么生成阴影。着色只考虑着色点自己，光源，摄像机，没考虑其他物体。Shadow mapping。《古墓丽影暗影》光栅化的阴影
52:29 Shadow mapping是图像空间的算法，生成阴影是不需要知道场景的几何信息，会产生走样现象。思想：点不在阴影里说明相机和光源都能看到这个点。硬阴影
54:47 第一步，从光源看向场景，记录深度图；第二步，从相机出发再次看向场景，投影回光源，判断深度是否一致
60:15 实例
61:05 第一步，从光源看向场景，记录深度。
62:00 第二步，相机能看到的都投影回光源。结果很脏，问题：数值精度，shadow map分辨率问题，可能会走样
68:08 Shadow mapping总结，广泛使用，旷野之息，马里奥
69:30 问题，硬阴影，质量依赖shadow map的分辨率，浮点精度等问题
71:04 硬阴影和软阴影，软阴影，用日食举例，软阴影是因为光源有一定的大小。
75:00 这门课的框架。

# Lecture 13 Ray Tracing 1
00:00 今天要讲Whitted-Style光线追踪。国内图形学课只讲到Whitted-Style光线追踪，这门课还会讲更现代化的东西
02:40 光线追踪和光栅化
03:00 为什么要引入光线追踪。光栅化不能处理全局效果，包括软阴影，Glossy反射（没有镜子那么光滑的反射），间接光照（光线弹射不止一次）。
07:01 PUBG Buggy车的例子，光栅化快，质量相对低
08:01 光线追踪准确，但是很慢。光栅化实时，光线追踪离线，一帧10kCPU小时。疯狂动物城的例子。
10:25 基础的光线追踪算法。光线：1沿直线传播，2不发生碰撞，3光线从光源到场景到眼睛（可逆性）
13:47 古欧洲的（错误的）视觉理论。
15:20 光线投射，生成不同的光线。
16:52 光线追踪的假设，针孔摄像机，完美的反射。eye ray，shadow ray。每个像素从眼睛投出光线，求和场景的最近交点，然后和光源连线，判定是否对光源可见。（光线只弹射一次）
21:10 递归(Whitted-Style)光线追踪。
23:14 光线投射开始说，玻璃球反射+折射，每一个和场景的交点都算着色加到像素上。primary ray，secondary rays
31:12 第一个技术问题，求交点。定义光线，r(t) = o + td。t时间，d方向
33:04 光线和球求交点。(o + td - c)^2^ - R^2^ = 0。解出 t，
36:45 光线和隐式表面求交。f(o + td) = 0。解出t，正实数
38:35 显式表面，光线和三角形求交。判断内外，射线交点是奇数。
42:23 分解成两个问题。判断光线和平面求交，交点是否在三角形内。
43:34 平面如何定义，一个法线N和一个点p'。任何一个点到这个点与法向量垂直。
46:40 求交点(o + td -p') · N = 0。然后判断是否在三角形内
48:44 一步就求出和三角形交点的算法，Moller Trumbore算法。用重心坐标表示三角形上的点，变成了解线性方程组。如果解非负说明在三角形内。
52:50 光线和物体求交。和每个三角形求交再找最近太慢了，需要加速。
54:28 复杂场景的例子，一千多万三角形的例子，两千万三角形的植物例子
56:07 加速的方法。包围盒(bounding vlolumes)，用简单的东西包起来，如果连包围盒都碰不到，那里面更碰不到了。
57:40 三维情况，最常用长方体，理解成三个不同的对面形成的交集。
59:26 轴对齐包围盒(Axis-Aligned Bounding Box, AABB)，边是和坐标轴平行和垂直的。
61:09 如何判断光线是否和AABB求交。先看二维，求出两组对面的2 * 2个t，求交集。
65:56 三维的情况，3组对面，什么时候进盒子？三个对面都进入就算进入盒子，有任意一个离开就算离开。如果进入时间  < 离开时间，就说明有交点。还要考虑负值情况
69:51 如果离开时间<0，说明盒子在背后，不可能有交点。离开时间>=0, 进入时间<0，说明光源在盒子里面。仅当进入时间小于离开时间并且离开时间>=0时，相交。
73:35 为什么要轴对齐？因为好求。

# Lecture 14 Ray Tracing 2

00:26 GTC上的DLSS 2.0，RTXGI。这节课之后就不容易了
05:14 上节课，为什么做光线追踪，Whitted-Style光线追踪，光线求交点，AABB
07:35 今天讲AABBs加速光线追踪
08:06 1找包围盒，2分格子，3在重叠单元格中存物体
10:14 做光线追踪，光线和格子求交。最简单的思路，比如光线往右上方，那光线要么经过右边的格子，要么经过上面的格子，这就是如何光栅化一条线。
14:07 加速效果怎么样，格子的密度不能太大不能太小，3D中定为27 * 物体的数量
15:29 物体在场景中分布均匀的时候用格子比较好，不均匀容易导致“teapot in a stadium”问题
17:44 空间划分的思路。
18:26 划分结构：Oct-Tree（八叉树），KD-Tree（交替水平竖直划分，能保持二叉树的性质），BSP-Tree（不是横平竖直的砍，维度越高越复杂）
25:23 KD-Tree的例子，叶子节点存储几何形体
27:35 当前节点沿着哪划分，划分位置，子节点，实际物体只存在叶子节点上
28:59 穿过KD-Tree的求交点过程
34:04 格子和哪些物体相交？KD树的两个问题：三角形和格子相交很难判断，一个物体可能出现在多个叶子节点里。
38:31 解决KD树的问题：从物体划分。Bounding Volume Hierarchy（BVH）
38:56 步骤。把物体分为两堆，再分别求包围盒。避免一个几何结构出现在多个盒子里。递归把物体分为两堆并重新计算它们的包围盒（到比如小于5个停止）。
44:35 切开最长的轴，取中位数的物体，（找中位数不用排序，快速选择）
51:39 BVH的存储
52:07 算法伪代码，递归
53:50 空间划分和物体划分的区别
55:00 辐射度量学（国内的课不会提）
57:15 提辐射度量学的动机，精准
60:51 如何描述光照，定义了光照的若干属性，radiant flux, intensity, irradiance, radiance
63:48 radiant energy and flux（Power）用Q表示，单位J。radiant flux（光通量）Φ = dQ/dt，单位W，单位时间的能量
67:48 另外一种定义，单位时间通过光子的数量
68:43 光源发射的能量intensity， 物体表面接受到光的能量irradiance， 光线传播是度量能量radiance
70:02 intensity，单位立体角的Φ。什么是立体角，单位立体角的公式
77:48 立体角面积除以距离平方，各向同性点光源，I = Φ/4π
80:06 LED灯泡，标的是相当于白炽灯的多少瓦，

# Lecture 15 Ray Tracing 3

04:35 上两节课讲的内容。光线如何和物体求交，AABB对空间划分，树形结构，辐射度量学。这节课讲完辐射度量学，再讲反射方程，渲染方程，全局光照，简单的概率论
06:05 能量；单位时间的能量Φ(功率)；intensity  I(ω) = dΦ/dω，立体角
09:09 微分立体角，球面坐标系下，用θ和Φ表示方向，各自变化一点点，立体角的变化。dA = (r dθ)(r sinθ dΦ) = r^2^ sinθ dθ dΦ。dω = dA/r^2^ = sinθ dθ dΦ。
11:39 Irradiance 单位面积的能量 E(x) = dΦ(x)/dA
13:46 Lambert's Cosine Law讲垂直的面积怎么算
15:40 地球的冬夏
16:08 光线的衰减也可以通过Irradiance解释
18:17 Radiance，描述光线的属性，单位立体角单位垂直面积的功率，L(p, ω) = d^2^(p, ω)/dωdAcosθ。
21:35 和之前的概念，与Irradiance，intensity的关系
22:51 incident radiance和exiting radiance
26:07 irradiance和radiance，E(p)是L(p, omega)的积分，差的是方向性
29:04 BRDF（Bidirectional Reflectance Distribution Function），双向反射分布函数
29:30 微分面积元dA在接受到立体角上的能量d E ( ω i ) 之后，再向不同方向把能量辐射出去d L r ( x, ω r ) 
33:50 BRDF公式，描述光线和物体如何作用，定义了不同的材质。
36:40 反射方程。BRDF是考虑某一个方向入射，往某一个方向反射。考虑每一个入射方向对出射方向的贡献加起来，就是反射方程。反射方程中的RBDF项就是一个比例
40:00 反射方程的困难，从其他物体也会有光。
42:04 渲染方程，加上自己发射的光加上反射别人来的光。
46:53 反射方程的理解，多个点光源加起来，面光源用积分算，其他物体反射的当做光源，理解成递归的，可以写成简单形式
52:46 再简写，L = E + KL，目的是为了解渲染方程，解L，矩阵求逆，展开成级数L = E + KE + K^2^E + K^3^E + ...。光栅化把物体投影到屏幕上，着色做的是直接光照。光源自己可以直接投影到屏幕上，光栅化只有0次和1次。光线追踪可以做间接光照。
60:00 例子，直接光照。一直到光线弹射多次的对比。无限次，收敛。快门时间是对时间积分
65:40 解全局光照的问题，先讲概率论
66:00 随机变量，概率分布
66:56 概率
68:01 期望
69:05 连续情况下的分布和期望，概率密度，积分是1，乘x再积分是期望
72:45 随机变量函数的期望
73:56 回顾今天讲的内容，下节课讲路径追踪

# Lecture 16 Ray Tracing 4

01:15 今天把前面融会贯通，主要讲蒙特卡洛路径追踪
03:54 上节课。辐射度量学；radiance，irradiance解释反射问题；BRDF；反射方程；渲染方程；理解渲染方程（递归，算子）；概率论
05:44 今天的内容。简单复习上节课，蒙特卡洛积分，路径追踪。
05:56 复习渲染方程；连续性随机变量，概率密度函数
09:05 蒙特卡洛积分。为了算定积分，用数值方法。黎曼积分的方法。蒙特卡洛积分直观上的解释，指定一个分布多次采样求平均，这里用了均匀分布
13:33 基本蒙特卡洛积分的公式，举例子
16:32 样本越多，越准确；采样在x，积分域在x
20:36 路径追踪。Whitted-Style Ray Tracing复习，弹射光线，镜面反射，漫反射。
22:34 Whitted-Style的问题。问题1，两个茶壶的例子，specular镜面反射，glossy非镜面有光泽的反射。Whitted的镜面反射对于glossy是不对的
24:47 问题2，Cornell box的例子。漫反射与漫反射之间的物体可以弹射。直接光照和全局光照的区别，color bleeding效果
28:33 Whitted-Style是错的，渲染方程是对的，解渲染方程。包括积分和递归，需要解决。
31:00 积分用蒙特卡洛方法。简单情况场景，解这一个点的直接光照是什么
32:40 不发光，就可以去掉发光项。直接光照的L^i^就只有光源。就可以用蒙特卡洛的方法解。
34:50 考虑着色点p点，算积分，蒙特卡洛方法，对半球采样，推导
38:07 直接光照，p点ω~0~着色，伪代码
40:35 引入间接光照，就像从p点看向q点，算q点的直接光照
42:46 支持全局光照的路径追踪算法，伪代码，递归的算法。问题其实并没有解决
44:57 问题1，光线的数量会指数爆炸，就只用1根光线
47:25 只用一根光线的伪代码，这就是路径追踪的代码。
48:54 为什么叫路径追踪，但是噪声很大，用足够多的path
50:07 渲染一张图怎么做，伪代码。均匀取N个位置。
52:05 还有问题，递归要退出。
52:50 限制弹射次数不对，引入俄罗斯轮盘赌
54:18 以一定的概率停止追踪
55:47 假设正常着色结果是Lo，以一定的概率P往某一方向打光线，结果再除以概率，这样它的期望仍然是Lo
58:03 轮盘赌着色伪代码
59:49 算法已经正确了，但是效率不高，如果采样率（一个像素打多少path），就会有噪声（有示意图）
61:00 问题在哪，看例子。光源很小，打到光源很难，就浪费了很多光源。
62:56 不浪费光线的采样方法，在光源上面采样。如果想要对光源进行采样的并依然使用蒙题卡洛的方法，那么一定要将其修改为对光源面积 dA的积分
66:05 换言之就是需要找到dA与dω i 的关系。公式
68:44 就可以重写渲染方程，把dω i 用dA表示就可以了
70:17 现在就可以修改算法，改成两部分
71:30 两部分的伪代码，光源的贡献，间接光照的贡献
74:00 还有一个问题，光源被挡到，只需从着色点x向光源采样点x’发出一条检测光线判断是否与光源之外的物体相交即可
75:56 遗留问题，点光源很难，路径追踪不好处理，做成很小的面积光源。路径追踪想把代码写对有点难，不属于入门但现代
78:24 cornell box，路径追踪渲染与真实场景的对比几乎一模一样
79:30 早期的ray tracing就是whitted-style，现代的指方法集合
81:36 没讲的问题。怎样均匀采样没讲。蒙特卡洛积分应该选哪样的pdf，重要采样理论。随机数的质量，低差异序列
83:53 半球和光源结合起来？multiple importance sampling。平均起来，加权？。radiance和颜色，gamma校正，曲线和颜色空间是什么。路径追踪算不算入门？算。闫令琪学了10年。后面的课会容易些

# Lecture 17 Materials and Appearances

01:55 今天讲材质的外观。自然界的外观。光线和材质的作用。WETA的MANUKA渲染器是现在最强的
07:24 图形学中的材质，咖啡模型渲染的不同结果。BRDF决定材质
10:55 材质 == BRDF，漫反射材质，假设光线进来是相同的，反射也是相同的，能量守恒。反射方程简化。BRDF是0~1/π，不是0~1
15:56 glossy材质
17:10 反射+折射，玻璃和水的材质，
19:02 反射定律，公式。镜面反射，入射光，法线，出射光。方位角
23:49 镜面反射的例子，镜面反射的BRDF
24:58 折射，几何光学的形式描述。caustic（翻译成焦散，这个翻译不好，因为和散射没关系），caustic是打到海水的条状。
27:05 Snell's Law折射定律，折射率×正弦相等，钻石的折射率很高
29:45 算折射角的余弦。全反射现象发生的条件，入射介质更密。
32:27 Snell's Window/Circle，人在水底，只能看到锥形的区域，97.2度。BRDF+BTDF=BSDF
35:20 菲涅尔项（Fresnel Term），反射有多少。
36:50 入射越平反射越多，关系。公交车的例子
39:36 绝缘体和导体的反射区别，
40:34 菲涅尔项怎么算，简化方法Schlick's approximation
42:55 导体的折射率是负数。微表面模型
43:33 卫星图，澳大利亚高光，澳大利亚中间是沙漠
45:55 从远处看是粗糙的平面，从近处看是凹凸不平的并且是镜面。远处外观，近处几何。
48:05 研究法线的分布。靠近在宏观表面法线，glossy。分散的比较开，diffuse漫反射
49:45 微表面BRDF。菲涅尔项，几何项用来修正Grazing algle，法线分布。
54:55 autodesk Fusion用微表面模型渲染的摩托车，坐垫，木头
57:27 区分材质的方式，电梯间的内部，往一个方向磨过的金属，各项同性/异性材质。
59:52 表面的方向不同
60:46 反映在BRDF上，旋转后BRDF不相等，和绝对的方位角相关
62:40 锅底，绕着圆心刷，商用渲染器Vray
63:50 各向异性的例子，Nylon尼龙
64:34 各向异性的例子，velvet天鹅绒，可以拨纤维。
66:00 总结BRDF的性质。非负，线性性质，可逆性，能量守恒
69:26 各项同性的BRDF，4维降到3维。可逆性，关于BRDF的测量和储存
71:24 测量BRDF，理论和实际的菲涅尔项差很多
72:40 从四面八方去拍
73:18 用真实的机器测量
74:28 算法，枚举所有出射，放光源，枚举所有入射，放相机。改进的方法
76:30 存储BRDF，MERL BRDF库

# Lecture 18 Advanced Topics in Rendering

03:48 先说高级光线传播。无偏和有偏，无偏的代表（Bidirectional path tracing， BDPT）双向路径追踪，Metropolis light transport（MLT）。有偏的方法，光值映射，Vertex connection and merging（VCM）。实施辐射度算法
04:43 有偏和无偏。无偏，蒙特卡洛估计，不管用多少样本期望都是正确值。其他情况就是有偏
07:02 双向路径追踪，以前是从相机开始的，BDPT，两边两个半路径，端点连起来
08:10 效果对比，如果光源比较复杂，就很适合BDPT。BDPT会很慢
10:55 Metropolis light transport。思想是用马尔科夫链的方法。一旦发现对结果影响更大的有效路径后，Metropolis采样方法就会在path space中该路径临近的区域继续采样，使得得到的路径对结果的影响较大的可能性更大。
14:39 对比BDPT和MLT，MLT适合做复杂的。游泳池底的现象很难渲染
17:50 缺点很难确定收敛的速度；所有操作都是局部的，图像看上去脏，所以不用来渲染动画。
19:50 光子映射, 适合渲染caustics，还有Specular-Diffuse-Specular(SDS，镜漫镜)
21:39 两步的做法，1光子从光源出发直到打到diffuse，2光子从相机出发打sub-paths打到diffuse
23:20 两步合起来做密度估计，光子越集中越亮，任何一个着色点，取它周围的N个光子，看面积。
25:37 N的取值对Photon Mapping的影响，N小会噪声，N大会糊。有偏，一致。
28:43 渲染里，有偏=糊，一致=样本多就不糊。为什么不取固定面积数光子，因为会永远有偏
30:17 VCM，把BDPT和光子追踪结合起来，BDPT的path满足在一个面里就别浪费
31:58 实时辐射度（Instant Radiosity, IR）算法。已经被照亮的面都认为是新光源，用它们照亮着色点。
34:00 IR的效果，优点。缺点有的地方会莫名发光
35:42 工业界还有好多在用路径追踪。现在开始讲外观建模
37:58 散射介质，会提非表面模型，表面模型，程式化生成的模型
38:39 非表面模型。参与介质（Participating Media），或者叫散射介质，雾，云。
39:09 理解参与介质，光在行进过程中，被吸收或者被散射
40:17 Phase Function（相位函数）决定光线怎样散射
41:12 参与介质的渲染。在参与介质中，找path，连光源
42:41 例子，超能陆战队，刺客信条大革命，融化的巧克力兔子
44:22 真实的例子，用手挡住摄像头，但还能看到光线穿过去
44:47 头发的材质。头发的高光，无色（发白的）和有色
46:06 简单的模型，Kajiya-Kay Model，头发是圆柱，散射成圆锥，散射到四面八方去
47:17 广泛应用的模型Marschner Model，反射R，穿透TT，穿透反射穿透TRT
48:22 头发当做玻璃圆柱，内部有色素。考虑上面的三种相互作用
49:42 Marschner model的效果。多次弹射，计算量特别大。
51:12 最终幻想系列的头发，疯狂动物城的毛发
51:54 人的头发应用在动物身上，效果不好。
52:24 生物上的结构，人和动物毛发的髓质区别
53:33 引入髓质的对比，猫，人头发。
54:16 双层的圆柱模型，精准描述髓质，用5个分量。闫令琪提出的
55:24 5个分量加起来的效果。60万根毛发的仓鼠
56:30 猩球崛起，狮子王。都用了双层圆柱的毛发
58:09 其他模型。Granular Material（颗粒材质）
59:07 沙丘的模型，pixar的短篇
60:03 表面模型。散射介质的现象，玉石的Translucent（半透明）材质，水母
61:53 次表面散射，可以理解成BRDF的延伸，BSSRDF
64:10 次表面反射比较像有两个光源(内部和外部)，Dipole Approximation。
65:25 雕塑的BRDF效果和BSSRDF效果（Dipole）
66:13 渲染人脸
66:51 BSSRDF的龙
67:26 BSSRDF的渲染人，很真实
68:34 布料（Cloth），缠绕的纤维（fiber）缠绕成股（ply），股再缠绕成线（yarn）
70:20 表面模型和针织的方法有关
71:05 布和天鹅绒
71:30 把织布认为是在空间中分布的体积，当成反射介质。围巾和沙发布。计算量很大
72:54 渲染每一个Fiber。这三种方法，当成表面、介质、纤维，都有人用
73:53 布料的例子，电影里亚麻的衣服
74:36 复杂的材质。过于完美，真实世界车会有划痕，高光有小突起
76:22 热水壶的微表面模型，加入了划痕，闫令琪的作品
77:48 微表面模型的法线分布
78:40 蜗牛的超大法线贴图，喷漆加亮片
80:19 镜面，反射，考虑一个像素覆盖多个微表面，用法线分布
82:15 例子
83:00 卫星图，海面的波纹。古墓丽影的雪地
83:52 细节，还有衍射干涉，要考虑光的波动。不连续的效果
86:38 勺子上的高光，划痕，能看到彩色
87:07 程序化生成的外观，不存，什么时候用什么时候用函数查
88:01 噪声函数，定义在空间中，随用随取
88:47 车上的锈，就可以用噪声函数。还可以生成地形，水面，autodesk木头纹理，吉他的例子
91:20 问答

# Lecture 19 Cameras, Lenses and Light Fields

01:08 这周讲独立话题，这节讲相机透镜光场，下次讲颜色和感知。
03:11 图形学中成像方法，光栅化和光线追踪。捕捉方法成像，拍照，今天讲相机背后是什么
05:45 相机的截面图
06:19 小孔成像。针孔相机
07:51 去掉了镜头的相机，快门(Shutter)
08:18 捕捉光用传感器 （Sensor）,记录的是irradiance
08:57 没有透镜或针孔就不可能拍照
10:30 针孔相机，出现很早。针孔相机不会虚化，光线追踪就是针孔相机
12:41 Field of View(FOV，视场)，意思是能看到多大的范围
13:20 FOV = 2arctan(h / 2f)
15:48 视场以35mm胶片（36✖24mm）为基准。焦距指的是对应35mm胶片等效的焦距是多少
17:49 例子，视场越窄看的越远
18:22 改变传感器的大小，也能改视场。平常我们改焦距。传感器和胶片在渲染中，传感器记录irradiance，film记录存成什么格式
20:07 传感器大小，相机和手机对比
21:05 手机传感器小，要保证视场大，就要减少焦距
21:45 曝光(exposure)，H = T × E，T是曝光时间，E是irradiance。irradiance会由光圈(aperture)
24:49 影响相机曝光打的因素，光圈（改f-stop，仿生瞳孔），快门，ISO争议（感光度，相当于后期处理）
27:53 各种因素对成像的影响，F数越小，光圈越大。快门速度是分数；ISO。
32:15 ISO是增益，ISO200就是ISO100的两倍
32:24 ISO噪声
33:15 光圈的F数，F-Number（F-Stop），写成FN或者F/N，N就是F数，非正式的理解，直径的逆
34:54 机械快门的工作原理，视频
36:33 快门的曝光时间对结果的影响，运动模糊
39:13 运动模糊不会总是不好的，赛车游戏。反走样
41:35 如果物体的运动比机械快门快，就会有rolling shutter问题，比如螺旋桨扭曲
42:51 快门时间短就提高光圈大小。拍照的时候运动模糊和景深不能都要
45:20 高速摄影，极短的快门时间和高ISO
46:38 超低速，长曝光，小光圈，延时摄影。
47:59 镜头。薄透镜近似，透镜组
49:04 有很多透镜平行光不能聚集到一点。
49:35 我们研究的是理想的薄透镜，平行进入会聚集到焦点。假设我们可以改焦距
51:23 物理规律，还有1/焦距 = 1/物距 + 1/像距
53:00 公式的由来，推导
55:47 演示的软件
56:42 defocus blur解释景深。计算Circle of confusion（COC）的大小。用相似三角形算，CoC的大小和棱镜的大小成正比
60:54 大光圈和小光圈的酒瓶
62:06 光圈，F数的明确定义，焦距除以光圈的直径
63:10  计算F数
63:30 焦距除以F数，小光圈拍的清楚
64:13 用薄透镜渲染
65:05 透镜做光线追踪。设定，sensor的大小，透镜的焦距，光圈，物距，就知道了像距，就可以做光线追踪。
67:30 遍历成像平面上的每个点，在透镜上随便选一个点，就能知道会打到物距的哪里
69:13 定义景深(depth of field)的概念, 场景中有一段深度，经过透镜后会在成像平面的附近形成一段区域，这段CoC足够小，就是锐利的
71:56 图，depth of field到depth of focus
73:31 网站的例子
75:56 光场下节课再讲

# Lecture 20 Color and Perception

08:10 Linux录屏可以用SimpleScreenRecorder
10:05 light field和lumigraph是同一个东西，都是光场
10:52 人眼看到什么，3D世界，2D图像
13:10 用全光函数(plenoptic function)描述我们能看到什么
13:40 P(θ，Φ)灰度快照，极坐标表示。P(θ, Φ, λ)，加上波长表示彩色。P(θ, Φ, λ, t)，加上时间就成了电影。P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)，自己可以移动，就成了全息电影。整个世界其实是一个七个维度的函数
17:11 简单的情况，光场是全光函数的一小部分。
18:05 定义光场前，定义光线。P(θ, Φ, V~X~, V~Y~, V~Z~)，5D，用两个点也可以定义一条光线
19:10 物体的表面，看向物体，描述物体的包围盒。函数记录了物体表面不同位置往各个方向的发光强度
21:29 物体的光场，可以得到任意一个位置的观测。
23:15 包围盒的表面也可以记录光场
24:20 更近一步，取一个平面。用两个平面定义光场，两个点一连就知道了
26:00 光场的参数化，四维函数，用u, v, s, t，两个平面上各自取一个点来描述
27:10 两种不同的理解方式，在st上取点，看uv都不一样
27:39 每个uv都是不同角度的世界，好理解。固定st，看uv，反过来想，irradiance
30:30 stanford摄像机的矩阵
31:25 复眼，成像光场。分光，光场照相机的原理。
34:33 光场照相机。把像素替换成透镜，透镜把来自不同方向的光分开再记录下来。光场照相机支持后期的重新聚焦
37:42 光场照相机的照片例子
38:35 光场照相机的原理。
41:17 还原成普通照片。每个透镜选一条光线，选不同方向的
44:50 光场照相机记录了光线的位置和方向。问题，分辨率不足，高成本，数量与大小的trade-offs
49:23 牛顿的实验，白光穿过棱镜，分解成不同颜色
50:18 不同的波长对应不同的折射率，光谱是光线的能量在不同的波长上的分布，可见光的光谱在400-700nm
51:04 谱功率密度(Spectral Power Distribution, SPD)，描述光在任何波长的分布
51:04 蓝天的spd
52:11 各种不同的光的SPD
52:36 SPD的线性性质
53:09 颜色是人的感知，不是特定的波长
54:28 人的眼球。视网膜上的感光细胞，视杆细胞感知强度得到灰度图，视锥细胞少很多，感知颜色
57:05 视锥细胞分成3类，S, M, L型，对三种类型的波长响应不同，响应曲线
58:26 不同的人三种视锥细胞分布很不一样
59:36 三种细胞对波长的感知，SPD×响应曲线再积分，人们看到的是三个数
61:42 人眼就不是看到波长，而是三个数S，M，L
62:13 同色异谱(metamerism)现象。不同的信号经过积分后得到的三个数相同
63:24 实际例子
63:43 实际应用，显示器
64:20 混合颜色，RGB。加色系统，加起来变白
65:48 线性组合基本颜色
66:46 有时候混不出来，系数是负的
67:46 CIE RGB系统
69:07 做实验，得到波长的三种颜色，匹配函数
70:36 实际光谱，SPD分布，考虑每一个波长，每个波长在分成颜色，积分
72:03 颜色空间，sRGB（标准RGB）。
73:00 另外一个心痛，CIE XYZ系统，人造的匹配系统，虚拟的。没有负数，Y表示亮度。
75:14 XYZ，先归一化，加起来等于1，固定y，再可视化x和y，这就叫色域
77:04 色域的中心，白色，边界是最纯的颜色
80:00 还有其他的空间，HSV，颜色拾取器，色调，饱和度（更接近白色还是越接近单一颜色），亮度 
82:07 CIE LAB空间，感知，L是lightness，a是红绿，b是蓝黄
83:35 互补色的原理，有蓝绿色黄绿色，没有红绿色
84:39 互补色的实验，五星红旗
85:23 忍者神龟的例子
86:27 颜色是相对的，棋盘格阴影的例子
88:22 黄紫对比的错觉
88:59 减色系统，越混合越黑。CMYK，cyan蓝绿，magenta品红，yellow，key黑。黑色省钱
92:08 高动态范围（HDR）图像没有提，就是比白色还亮，没讲gamma校正

# Lecture 21 Animation

02:15 课程的4个方向，光栅化，几何，光线传播，动画/模拟
05:05 今天讲计算机动画入门。历史，制作动画的方法，物理模拟，运动学，rigging。这节课讲概念，下节课讲解法
05:43 动画的定义，把物体变成活的。图形学中可以理解成建模的延伸。虚拟现实要求90fps才不晕
08:46 动画的发展，公元前的壁画，1831的圆盘动画
10:25 电影的技术，最早是科研用，观察马
11:06 第一步完整长度的动画，1937年迪士尼的白雪公主和七个小矮人
11:59 早期的计算机动画。1964Sketchpad，1972人脸网格模型面部表情，1993侏罗纪公园电脑生成的恐龙，1995Pixar玩具总动员，2009天降美食，2019冰雪奇缘2。
16:34 关键帧动画，关键帧之间是过渡。艺术家画关键帧，助手画过渡
19:08 关键帧的插值
20:10 线性的插值效果不好，需要光滑的
20:59 物理模拟的方式。F = ma
22:23 用数值模拟生成物体的运动
23:28 布料模拟的例子。流体的模拟
25:40 质点弹簧系统，绳子模拟器。
26:32 头发的渲染例子
27:20 质点弹簧系统模拟一块布。
28:25 质点弹簧系统，一个理想的没有长度的弹簧连接ab两个质点，胡克定律。问题弹簧没有0长度的
30:28 弹簧应该有Rest length，就是没力的长度。问题，会永远的振动下去，应该加入摩擦力
31:52 导数，摩擦力和速度成正比。问题：运动着的相对静止的ab间的弹簧不应该有摩擦力
34:26 将相对速度投影到ab方向
39:27 弹簧的组合。模拟一块布，但是布可以抵抗切变的力，需要改进。加入斜的对角线，加入跳跃连线
46:50 这样描述的布料
48:00 代替质点弹簧系统的有限元方法
49:31 粒子系统。
52:23 粒子运动动画。
53:56 作用力。吸引力，电磁力，斥力，摩擦力，粘斥力，碰撞……
54:52 举例子，万有引力。
55:17 NASA用粒子模拟星系
55:54 粒子模拟流体，例子
56:37 模拟鸟群。模拟分子结构。本质上是定义个体和群体的关系。人的粒子
59:40 运动学。如何做出动画。骨骼，关节模型
61:32 例子，2d两段手臂
62:59 正向运动学，人走路例子
63:13 正向运动学调整不直观，艺术家需要逆运动学
64:10 固定p点的位置，解2个角度。问题：解并不唯一，也可能无解
66:35 优化方法两个角度，梯度下降法
67:55 逆运动学的例子
68:20 Rigging的定义。
70:29 Rigging的例子，通过控制点控制
71:23 blend shapes，控制点之间插值。例子
72:47 动作捕捉，真人身上装控制点
74:07 动作捕捉优缺点
75:59 动作捕捉装备，还有机械。应用最多的还是光学的方法，多个相机
77:50 控制点运动数据
78:29 恐怖谷效应
79:31 阿凡达的面部捕捉
80:37 动画生产管线
85:55 下节课讲欧拉方法

# Lecture 22 Animation Cont.

03:55 今天的话题。
05:09 模拟某一个粒子在速度场v(x, t)
07:03 常微分方程，dx/dt = v(x, t)
08:34 给定起始位置x~0~
09:00 解法，对时间离散化。欧拉方法，也叫前向欧拉，显式欧拉，上一帧的加速度速度来算下一帧的。会迅速变得不稳定
12:07 不稳定的例子，步长越小越精确
13:34 另外一个问题，有的情况步长取多小都会不稳定
16:00 用数值方法解微分方程都会出现的问题，误差，不稳定
17:11 绝地求生不稳定的例子
18:03 解决不稳定性的方法，中点法、自适应步长法、隐式法、不是基于物理的方法
18:49 中点法，得到中点的速度，用中点的速度再算一次
21:16 展开后，中点法比欧拉方法多了一个二次项
22:26 自适应步长，根据误差决定是否要往下分
25:59 隐式欧拉方法，用下一个时间的速度和加速度。
30:35 怎样定义稳定，用阶数定义稳定
33:04 Runge-Kutta（龙格库塔）方法，用来解常微分方程，4阶，k1,k2,k3,k4
37:38 不是基于物理的方法
39:58 刚体的模拟，4个量求导
42:32 流体模拟，假设水体是由很多刚体小球组成的，水不可压缩，任何一个位置的密度梯度下降
49:40 质点法（拉格朗日方法），网格法（欧拉法）
52:34 Material Point Method（MPM）混合方法
54:04 课结束了。4部分
57:50 广告
