---
title: C++随手笔记
description: 持续更新
date: 2020-03-31 
updated: 2020-04-25
categories:
- C++
tags:
- C++
---

&emsp;&emsp;在知乎上看到一个回答[C++ 有多难？ - 纸条的回答 - 知乎](https://www.zhihu.com/question/30196513/answer/563560938)，评论里面提到第一个问题的另一种写法，确实比较巧妙，代替四个函数的重载
```cpp
Teacher(std::string n, std::string p)
: name(std::move(n)), position(std::move(p)) {}
```
&emsp;&emsp;这种方法会多一次`std::string`的移动构造函数调用，但对性能的影响很小

***

## 使用标准库chrono计算程序运行时间
&emsp;&emsp;以前通常用`ctime`头文件中的`clock`计算程序运行时间
```cpp
clock_t startTime,endTime;
startTime = clock();//计时开始

//run code

endTime = clock();//计时结束
cout << "The run time is: " <<(double)(endTime - startTime) / CLOCKS_PER_SEC << "s" << endl;
```
&emsp;&emsp;但是精度很低，好在C++11之后有了`chrono`
&emsp;&emsp;`chrono`是C++11新加入的方便时间日期操作的标准库，它既是相应的头文件名称，也是`std`命名空间下的一个子命名空间，所有时间日期相关定义均在`std::chrono`命名空间下。通过这个新的标准库，可以非常方便进行时间日期相关操作。
```cpp
auto t1 = std::chrono::steady_clock::now();
//run code
auto t2 = std::chrono::steady_clock::now();

//毫秒级
double dr_ms = std::chrono::duration<double, std::milli>(t2 - t1).count();

//微秒级
double dr_us = std::chrono::duration<double, std::micro>(t2 - t1).count();

//纳秒级
double dr_ns = std::chrono::duration<double, std::nano>(t2 - t1).count();

//秒
double dr_s = std::chrono::duration<double>(t2 - t1).count();
```